<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NuvaFace - Ästhetische Behandlungssimulation</title>
    <link rel="stylesheet" href="styles_new.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">NF</div>
                <div class="brand-text">
                    <h1>NuvaFace</h1>
                    <p class="subtitle">Demo - Nicht für medizinische Beratung</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        
        <!-- Landing Section -->
        <section id="landingSection" class="section active">
            <div class="hero-section">
                <h2 class="hero-title">Lassen Sie Ihre Behandlung simulieren</h2>
                <p class="hero-subtitle">Visualisieren Sie das Ergebnis ästhetischer Behandlungen mit modernster KI-Technologie</p>
            </div>

            <!-- Do's and Don'ts -->
            <div class="guidelines-section">
                <h3>Für optimale Ergebnisse</h3>
                <div class="guidelines-grid">
                    <!-- Do's -->
                    <div class="guideline-card do">
                        <div class="guideline-icon">✓</div>
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23888' font-size='14'%3EHeller Hintergrund%3C/text%3E%3C/svg%3E" alt="Do">
                        <h4>Heller, einheitlicher Hintergrund</h4>
                        <p>Neutraler weißer oder grauer Hintergrund, gleichmäßiges Licht</p>
                    </div>
                    <div class="guideline-card do">
                        <div class="guideline-icon">✓</div>
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23888' font-size='14'%3EFrontales Portrait%3C/text%3E%3C/svg%3E" alt="Do">
                        <h4>Frontales Portrait, scharf</h4>
                        <p>Bitte direkt in die Kamera, keine starke Neigung oder Drehung</p>
                    </div>
                    <!-- Don'ts -->
                    <div class="guideline-card dont">
                        <div class="guideline-icon">✗</div>
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23333'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='14'%3EDunkel%3C/text%3E%3C/svg%3E" alt="Don't">
                        <h4>Dunkel / Gegenlicht</h4>
                        <p>Zu wenig Licht führt zu ungenauen Simulationen</p>
                    </div>
                    <div class="guideline-card dont">
                        <div class="guideline-icon">✗</div>
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23666'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='14'%3ESchatten%3C/text%3E%3C/svg%3E" alt="Don't">
                        <h4>Starker Schatten / Farbfilter</h4>
                        <p>Schatten und Filter verfälschen Haut und Konturen</p>
                    </div>
                    <div class="guideline-card dont">
                        <div class="guideline-icon">✗</div>
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23999'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='14'%3EVerdeckt%3C/text%3E%3C/svg%3E" alt="Don't">
                        <h4>Haare/Accessoires verdecken das Gesicht</h4>
                        <p>Bitte Stirn, Wangen, Lippen sichtbar lassen</p>
                    </div>
                    <div class="guideline-card dont">
                        <div class="guideline-icon">✗</div>
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Crect width='150' height='150' fill='%23777'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='14'%3EMehrere Personen%3C/text%3E%3C/svg%3E" alt="Don't">
                        <h4>Mehrere Personen im Bild</h4>
                        <p>Nur eine Person pro Foto</p>
                    </div>
                </div>
            </div>

            <!-- Interactive Area Selection -->
            <div class="area-selection-interactive">
                <h3>Wählen Sie den Behandlungsbereich</h3>
                <div class="face-selector">
                    <!-- SVG Face Map Fallback (since 3D model requires more setup) -->
                    <div class="face-container">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 400'%3E%3Cellipse cx='150' cy='200' rx='100' ry='130' fill='%23fdbcb4' stroke='%23333' stroke-width='2'/%3E%3Cellipse cx='120' cy='180' rx='15' ry='20' fill='white'/%3E%3Cellipse cx='180' cy='180' rx='15' ry='20' fill='white'/%3E%3Ccircle cx='120' cy='180' r='8' fill='%23333'/%3E%3Ccircle cx='180' cy='180' r='8' fill='%23333'/%3E%3Cpath d='M150 200 L150 230' stroke='%23333' stroke-width='2' fill='none'/%3E%3Cpath d='M120 260 Q150 280 180 260' stroke='%23333' stroke-width='2' fill='none'/%3E%3C/svg%3E" alt="Face" class="face-image">
                        
                        <!-- Hotspot Areas -->
                        <button class="hotspot forehead-spot" data-area="forehead" title="Stirn (Botox)">
                            <span class="hotspot-label">Stirn</span>
                        </button>
                        <button class="hotspot cheeks-spot" data-area="cheeks" title="Wangen (Filler)">
                            <span class="hotspot-label">Wangen</span>
                        </button>
                        <button class="hotspot lips-spot" data-area="lips" title="Lippen (Filler)">
                            <span class="hotspot-label">Lippen</span>
                        </button>
                        <button class="hotspot chin-spot" data-area="chin" title="Kinn (Filler)">
                            <span class="hotspot-label">Kinn</span>
                        </button>
                    </div>
                    <div class="area-info" id="areaInfo">
                        <p>Bewegen Sie die Maus über einen Bereich, um mehr zu erfahren</p>
                    </div>
                </div>

                <button class="primary-btn" id="proceedToUpload" disabled>
                    <i class="fas fa-arrow-right"></i> Weiter zum Bildupload
                </button>
            </div>
        </section>

        <!-- Upload Section -->
        <section id="uploadSection" class="section">
            <div class="section-header">
                <button class="back-btn" onclick="app.showSection('landingSection')">
                    <i class="fas fa-arrow-left"></i> Zurück
                </button>
                <h2>Bild hochladen</h2>
            </div>

            <div class="selected-area-display">
                <span>Gewählter Bereich:</span>
                <strong id="selectedAreaDisplay">-</strong>
            </div>

            <div class="upload-container">
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h3>Foto hochladen</h3>
                    <p>Bild hierher ziehen oder klicken zum Durchsuchen</p>
                    <input type="file" id="fileInput" accept="image/*" style="display: none;">
                </div>
                <div class="upload-preview" id="uploadPreview" style="display: none;">
                    <img id="previewImage" alt="Preview">
                    <button class="change-image-btn" onclick="app.changeImage()">
                        <i class="fas fa-exchange-alt"></i> Bild ändern
                    </button>
                </div>
            </div>
        </section>

        <!-- Lips Segmentation (Simplified) -->
        <section id="segmentSection" class="section">
            <div class="section-header">
                <h2>Erkannte Lippenpartie</h2>
            </div>

            <div class="segment-preview">
                <div class="segment-container">
                    <canvas id="segmentCanvas"></canvas>
                    <canvas id="segmentOverlay"></canvas>
                </div>
                <p class="segment-info">Die erkannte Lippenregion wird rot markiert</p>
            </div>

            <button class="primary-btn" onclick="app.proceedToResult()">
                <i class="fas fa-arrow-right"></i> Weiter
            </button>
        </section>

        <!-- Result Section -->
        <section id="resultSection" class="section">
            <div class="section-header">
                <button class="back-btn" onclick="app.startOver()">
                    <i class="fas fa-home"></i> Neu starten
                </button>
                <h2>Simulationsergebnis</h2>
            </div>

            <!-- Volume Control -->
            <div class="volume-control">
                <label>Volumen</label>
                <div class="slider-container">
                    <input type="range" id="volumeSlider" min="0" max="4" step="0.1" value="2">
                    <span class="volume-value" id="volumeValue">2.0 ml</span>
                </div>
            </div>

            <!-- Before/After View -->
            <div class="result-container">
                <div class="before-after-view">
                    <div class="image-panel before">
                        <h3>Vorher</h3>
                        <img id="beforeImage" alt="Vorher">
                    </div>
                    
                    <div class="generate-control">
                        <button class="generate-btn" id="generateBtn" onclick="app.generateSimulation()">
                            <i class="fas fa-magic"></i>
                            <span>Generieren</span>
                        </button>
                        <div class="loader" id="loader" style="display: none;">
                            <div class="spinner"></div>
                        </div>
                    </div>
                    
                    <div class="image-panel after">
                        <h3>Nachher</h3>
                        <img id="afterImage" alt="Nachher">
                        <button class="download-btn" id="downloadBtn" onclick="app.downloadResult()" style="display: none;">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Generation History -->
            <div class="generations-section" id="generationsSection" style="display: none;">
                <h3>Letzte Generierungen</h3>
                <div class="generations-carousel" id="generationsCarousel">
                    <!-- Thumbnails will be added here dynamically -->
                </div>
            </div>
        </section>

    </div>

    <!-- Scripts -->
    <script src="app_new.js"></script>
</body>
</html>